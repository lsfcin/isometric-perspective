<!-- Isometric Tile Configuration.html -->
<div class="tab" data-tab="isometric">
  <div class="form-group">
    <label>{{localize 'isometric-perspective.tile_enableIsometric_name'}}</label>
    <div class="form-fields">
        <input type="checkbox" name="flags.isometric-perspective.isoTileDisabled" {{#if isoTileDisabled}}checked{{/if}}>
    </div>
    <p class="notes">{{localize 'isometric-perspective.tile_enableIsometric_hint'}}</p>
  </div>

  <hr>

  <div class="form-group offset-point">
    <label>{{localize 'isometric-perspective.tile_artOffset_name'}}</label>
    <div class="form-fields">
      <label class="axisX">X</label>
      <input type="number" name="flags.isometric-perspective.offsetY" 
             value="{{offsetY}}"
             step="1" />
      <button class="fine-adjust" title="Hold and drag to fine-tune X and Y">âœ¥</button>
      <input type="number" name="flags.isometric-perspective.offsetX"
             value="{{offsetX}}"
             step="1" />
      <label class="axisY">Y</label>
    </div>
    <p class="notes">{{localize 'isometric-perspective.tile_artOffset_hint'}}</p>
  </div>

  <div class="form-group">
    <label>{{localize 'isometric-perspective.tile_scale_name'}}</label>
    <div class="form-fields">
      <input type="range" name="flags.isometric-perspective.scale"
             value="{{scale}}"
             min="0.01" max="3" step="0.01"
             class="scale-slider" />
      <span class="range-value">{{scale}}</span>
    </div>
    <p class="notes">{{localize 'isometric-perspective.tile_scale_hint'}}</p>
  </div>

  <div class="form-group">
    <label>{{localize 'isometric-perspective.tile_flip_name'}}</label>
    <div class="form-fields">
        <input type="checkbox" name="flags.isometric-perspective.tokenFlipped" {{#if isFlipped}}checked{{/if}}>
    </div>
    <p class="notes">{{localize 'isometric-perspective.tile_flip_hint'}}</p>
  </div>

  <div class="form-group">
    <label>{{localize 'isometric-perspective.tile_occluding_name'}}</label>
    <div class="form-fields">
      <input type="checkbox" name="flags.isometric-perspective.OccludingTile" {{#if isOccluding}}checked{{/if}}>
    </div>
    <p class="notes">{{localize 'isometric-perspective.tile_occluding_hint'}}</p>
  </div>

  <div class="form-group occlusion-alpha-group" style="display: none;">
    <label>{{localize 'isometric-perspective.tile_occlusion_opacity_name'}}</label>
    <div class="form-fields">
      <input type="range" name="flags.isometric-perspective.OcclusionAlpha"
             value="{{occlusionAlpha}}"
             min="0" max="1" step="0.01"
        class="scale-slider" />
      <span class="range-value">{{occlusionAlpha}}</span>
    </div>
    <p class="notes">{{localize 'isometric-perspective.tile_occlusion_opacity_hint'}}</p>
  </div>

  <hr>

  <div class="form-group">
    <label>{{localize 'isometric-perspective.tile_link_wall_name'}}</label>
    <input type="text" name="flags.isometric-perspective.linkedWallIds" value="{{linkedWallIds}}" readonly>
  </div>
  
  <div class="form-group">
    <button type="button" class="select-wall"><i class="fas fa-plug"></i> {{localize 'isometric-perspective.tile_link_wall_select_wall'}}</button>
    <button type="button" class="clear-wall"><i class="fa-solid fa-burst"></i> {{localize 'isometric-perspective.tile_link_wall_clear_wall'}}</button>
    <p class="notes">{{localize 'isometric-perspective.tile_link_wall_hint'}}</p>
  </div>

  <hr>

  <!-- Tile Presets Minimal UI -->
  <h3>{{localize 'isometric-perspective.tile_presets_section'}}</h3>
  <div class="form-group">
    <label>{{localize 'isometric-perspective.tile_presets_select_label'}}</label>
    <div class="form-fields">
      <select name="flags.isometric-perspective.presetSelect" class="iso-preset-select">
        <option value="">{{localize 'isometric-perspective.tile_presets_select_placeholder'}}</option>
        {{#each presets}}
          <option value="{{this.name}}">{{this.name}}</option>
        {{/each}}
      </select>
      <button type="button" class="apply-preset">{{localize 'isometric-perspective.tile_presets_apply_button'}}</button>
    </div>
  </div>
  <div class="form-group">
    <label>{{localize 'isometric-perspective.tile_presets_name_label'}}</label>
    <div class="form-fields">
      <input type="text" name="flags.isometric-perspective.presetName" value="" placeholder="New preset name" />
      <button type="button" class="save-preset">{{localize 'isometric-perspective.tile_presets_save_button'}}</button>
      <button type="button" class="delete-preset">{{localize 'isometric-perspective.tile_presets_delete_button'}}</button>
    </div>
  </div>
  <div class="form-group">
    <label>{{localize 'isometric-perspective.tile_presets_include_walls'}}</label>
    <div class="form-fields">
      <input type="checkbox" class="preset-include-walls" />
    </div>
  </div>

  <style>
    .scale-slider {
      flex: 4;
    }
    .range-value {
      flex: 1;
      text-align: center;
      line-height: var(--form-field-height);
    }
  </style>
</div>
